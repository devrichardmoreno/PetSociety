<h2 class="modal-title">Historia clínica</h2>

@if (loadingDiagnoses) {
    <div class="loading">Cargando diagnósticos...</div>
}

@if (diagnosesError) {
    <div class="error">Error al cargar los diagnósticos: {{ diagnosesError }}</div>
}

@if (lastestDiagnoses.length > 0) {
    <ul class="diagnoses-list" role="list">
        @for (diagnose of lastestDiagnoses; track $index) {
            <li class="diagnose-item" role="listitem" aria-label="Diagnóstico {{ $index + 1 }}">
                <div class="diagnose-header">
                    <h3 class="diagnose-pet">Mascota: {{ diagnose.petName || '—' }}</h3>
                    <span class="diagnose-date">{{ diagnose.date | date:'dd/MM/yyyy HH:mm' }}</span>
                </div>
                <div class="diagnose-body">
                    <p class="diagnose-summary"><strong>Diagnóstico :</strong>{{ diagnose.diagnose || 'Sin diagnóstico' }}</p>
                    <p class="diagnose-summary"><strong>Tratamiento :</strong>{{diagnose.treatment}}</p>
                    <p class="diagnose-doctor">Doctor: {{ diagnose.doctorName || '—' }}</p>
                </div>
            </li>
        }
    </ul>


<div class="pagintaion-controls">
    <button 
    mat-raised-button
    color="primary"
    (click)="prevPage()"
    [disabled]="diagnosesPage.page <= 0 || loadingDiagnoses">
        ◀ Anterior
    </button>
    
    <span class="page-info">Página {{ diagnosesPage.page + 1 }} de {{ diagnosesPage.totalPages }}</span>

    <button 
    mat-raised-button
    color="primary"
    (click)="nextPage()"
    [disabled]="diagnosesPage.page + 1 >= diagnosesPage.totalPages || loadingDiagnoses">
        Siguiente ▶
    </button>
</div>

} @else if (!loadDiagnoses && lastestDiagnoses.length === 0) {
    <div class="no-diagnoses">No hay diagnósticos para mostrar.</div>
}
