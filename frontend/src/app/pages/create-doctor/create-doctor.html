<section id="doctor-container-all">

  <div class="doctor-wrapper">
    <div class="doctor-image">
      <img src="assets/images/doctor-logo.png" alt="Doctor Logo">
    </div>

    <form [formGroup]="doctorForm" (ngSubmit)="onSubmit()">
      <h1>{{ isEditMode ? 'Editar Doctor' : 'Registrar Nuevo Doctor' }}</h1>

      @if (!isEditMode) {
        <div class="input-wrapper">
          <label for="username" class="input-label">Usuario</label>
          <input id="username" type="text" class="custom-input" formControlName="username" placeholder="Ingrese un nombre de usuario">
        </div>
        @if (doctorForm.get('username')?.touched && doctorForm.get('username')?.hasError('required')) {
          <div class="error-message">
            <p class="error-msg">El usuario es obligatorio.</p>
          </div>
        }

        <div class="input-wrapper">
          <label for="password" class="input-label">Contraseña</label>
          <input id="password" type="password" class="custom-input" formControlName="password" placeholder="Ingrese una contraseña segura">
        </div>
        @if (doctorForm.get('password')?.touched && doctorForm.get('password')?.hasError('required')) {
          <div class="error-message">
            <p class="error-msg">La contraseña es obligatoria.</p>
          </div>
        }
      }

      <div class="input-wrapper">
        <label for="name" class="input-label">Nombre</label>
        <input id="name" type="text" class="custom-input" formControlName="name" placeholder="Ingrese el nombre">
      </div>
      @if (doctorForm.get('name')?.touched && doctorForm.get('name')?.hasError('required')) {
        <div class="error-message">
          <p class="error-msg">El nombre es obligatorio.</p>
        </div>
      }

      <div class="input-wrapper">
        <label for="surname" class="input-label">Apellido</label>
        <input id="surname" type="text" class="custom-input" formControlName="surname" placeholder="Ingrese el apellido">
      </div>
      @if (doctorForm.get('surname')?.touched && doctorForm.get('surname')?.hasError('required')) {
        <div class="error-message">
          <p class="error-msg">El apellido es obligatorio.</p>
        </div>
      }

      <div class="input-wrapper">
        <label for="phone" class="input-label">Teléfono</label>
        <input id="phone" type="text" class="custom-input" formControlName="phone" placeholder="Ingrese el teléfono">
      </div>
      @if (doctorForm.get('phone')?.touched && doctorForm.get('phone')?.hasError('required')) {
        <div class="error-message">
          <p class="error-msg">El teléfono es obligatorio.</p>
        </div>
      }

      <div class="input-wrapper">
        <label for="dni" class="input-label">DNI</label>
        <input id="dni" type="text" class="custom-input" formControlName="dni" placeholder="Ingrese el DNI">
      </div>
      @if (doctorForm.get('dni')?.touched && doctorForm.get('dni')?.hasError('required')) {
        <div class="error-message">
          <p class="error-msg">El DNI es obligatorio.</p>
        </div>
      }

      <div class="input-wrapper">
        <label for="email" class="input-label">Email</label>
        <input id="email" type="email" class="custom-input" formControlName="email" placeholder="Ingrese el email">
      </div>
      @if (doctorForm.get('email')?.touched && doctorForm.get('email')?.hasError('required')) {
        <div class="error-message">
          <p class="error-msg">El email es obligatorio.</p>
        </div>
      }
      @if (doctorForm.get('email')?.hasError('email')) {
        <div class="error-message">
          <p class="error-msg">Debe ingresar un email válido.</p>
        </div>
      }

      <div class="input-wrapper">
        <label for="speciality" class="input-label">Especialidad</label>
        <select id="speciality" class="custom-input" formControlName="speciality">
          <option [ngValue]="null" disabled selected>Seleccione una especialidad</option>
          @for (spec of specialities; track spec) {
            <option [ngValue]="spec">{{ getSpecialityLabel(spec) }}</option>
          }
        </select>
      </div>
      @if (doctorForm.get('speciality')?.touched && doctorForm.get('speciality')?.hasError('required')) {
        <div class="error-message">
          <p class="error-msg">La especialidad es obligatoria.</p>
        </div>
      }

      <button class="register-btn" type="submit" [disabled]="doctorForm.invalid">
        {{ isEditMode ? 'Guardar Cambios' : 'Registrar Doctor' }}
      </button>
    </form>
  </div>

</section>
